<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Veritas University - SDG Conference 2026 – Presenter Badge</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f6fb;
  text-align: center;
  padding: 20px;
}

h2 {
  color: #003366;
}

form {
  background: white;
  padding: 20px;
  display: inline-block;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,.1);
}

input, button {
  display: block;
  margin: 10px auto;
  padding: 10px;
  width: 280px;
  font-size: 14px;
}

button {
  background: #003366;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 5px;
}

button:hover {
  background: #0055aa;
}

canvas {
  margin-top: 20px;
  border: 2px solid #003366;
  border-radius: 12px;
}

a {
  font-weight: bold;
  color: #003366;
  text-decoration: none;
}
</style>
</head>

<body>

<h2>Veritas University - SDG Conference 2026 – Presenter Badge Generator</h2>

<form id="form">
  <input type="text" id="name" placeholder="Enter Full Name" required>
  <input type="file" id="photo" accept="image/*" required>
  <button type="submit">Generate Badge</button>
</form>

<br>

<canvas id="canvas" width="600" height="600"></canvas>

<br><br>
<a id="download" style="display:none;" download="sdg-presenter-badge.jpg">
⬇ Download Badge
</a>

<script>
// -------- TEXT WRAPPING FUNCTION --------
function wrapText(ctx, text, x, startY, maxWidth, lineHeight) {
  const words = text.split(" ");
  let line = "";
  let y = startY;

  for (let i = 0; i < words.length; i++) {
    const testLine = line + words[i] + " ";
    const metrics = ctx.measureText(testLine);

    if (metrics.width > maxWidth && i > 0) {
      ctx.fillText(line.trim(), x, y);
      line = words[i] + " ";
      y += lineHeight;
    } else {
      line = testLine;
    }
  }
  ctx.fillText(line.trim(), x, y);
}

// -------- MAIN LOGIC --------
const form = document.getElementById("form");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const download = document.getElementById("download");

form.addEventListener("submit", function(e) {
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const file = document.getElementById("photo").files[0];

  if (!name || !file) return;

  const reader = new FileReader();

  reader.onload = function() {
    const img = new Image();
    img.crossOrigin = "anonymous";

    img.onload = function() {

      // Reset canvas
      ctx.setTransform(1,0,0,1,0,0);
      ctx.textAlign = "center";

      // Background
      ctx.clearRect(0,0,600,600);
      ctx.fillStyle = "#ffffff";
      ctx.fillRect(0,0,600,600);

      // Header
      ctx.fillStyle = "#003366";
      ctx.fillRect(0,0,600,90);

      ctx.fillStyle = "#ffffff";
      ctx.font = "bold 20px Arial";
      ctx.fillText("SDG CONFERENCE 2026", 300, 40);
      ctx.font = "14px Arial";
      ctx.fillText("Veritas University, Abuja", 300, 65);

      // Presenter photo
      ctx.drawImage(img, 225, 120, 150, 150);

      // Name
      ctx.fillStyle = "#003366";
      ctx.font = "bold 26px Arial";
      ctx.fillText(name, 300, 310);

      // Role
      ctx.font = "18px Arial";
      ctx.fillText("PRESENTER", 300, 345);

      // Theme (wrapped properly)
      ctx.font = "bold 13px Arial";
      ctx.fillText("Theme:", 300, 375);

      ctx.font = "13px Arial";
      wrapText(
        ctx,
        "ACHIEVING THE SUSTAINABLE DEVELOPMENT GOALS IN AFRICA: PEOPLE, ENVIRONMENT AND INSTITUTIONS",
        300,
        395,
        520,
        18
      );

      // Date & Time
      ctx.fillText(
        "Date: 2nd February, 2026 | Time: 10:00 AM",
        300,
        455
      );

      // Venue
      ctx.fillText(
        "Venue: Veritas University, Abuja",
        300,
        480
      );

      

      // Footer
      ctx.fillStyle = "#003366";
      ctx.fillRect(0,520,600,80);
      ctx.fillStyle = "#ffffff";
      ctx.font = "14px Arial";
      ctx.fillText("Official Presenter Badge", 300, 565);

      // Enable download
      download.href = canvas.toDataURL("image/jpeg", 0.95);
      download.style.display = "inline";
    };

    img.src = reader.result;
  };

  reader.readAsDataURL(file);
});
</script>

</body>
</html>
